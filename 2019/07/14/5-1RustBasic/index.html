<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="DarrenLi">
    
    <title>
        
            5-1RustBasic |
        
        Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/favicon.ico">
    
<link rel="stylesheet" href="/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"www.ai-lijia.com","root":"/","language":"en","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/me.png","favicon":"/images/favicon.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving."},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"path":"search.json","field":"post","content":true,"format":"html","enable":true,"preload":true},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                Blog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                HOME
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                ARCHIVES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                ABOUT
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                CATEGORIES
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                TAGS
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">CATEGORIES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">TAGS</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">5-1RustBasic</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/me.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">DarrenLi</span>
                        
                            <span class="author-label">Lv3</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2019-07-14 21:12:49</span>
        <span class="mobile">2019-07-14 21:12</span>
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Rust/">Rust</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>4.8k Words</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>25 Mins</span>
        </span>
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1 id="3-变量"><a href="#3-变量" class="headerlink" title="3 变量"></a>3 变量</h1><p>体现了rust的安全 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">// 定义常量</span><br><span class="line">const MAX_POINT :u32=1000000;</span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line">    </span><br><span class="line">     //1. 变量定义</span><br><span class="line">     // 定义变量用let 如果变量没有mut的话 那么是不可变的</span><br><span class="line">     // let name:type =value</span><br><span class="line">     let a =1;</span><br><span class="line">   </span><br><span class="line">    println!(&quot;a = &#123;&#125;&quot;,a);</span><br><span class="line"></span><br><span class="line">    let mut b: u32 =2 ;</span><br><span class="line">    println!(&quot;b = &#123;&#125;&quot;,b);</span><br><span class="line"></span><br><span class="line">    // 修改变量 , 修改 可以用mut</span><br><span class="line">    // 可变性和不可变性</span><br><span class="line">    b=3;</span><br><span class="line">    println!(&quot;b = &#123;&#125;&quot;,b);</span><br><span class="line"></span><br><span class="line">    // 2. 隐藏性 后面的变量将前面的变量隐藏掉了</span><br><span class="line"></span><br><span class="line">    let b: f32 =1.1;</span><br><span class="line">    println!(&quot;b = &#123;&#125;&quot;,b);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 常量</span><br><span class="line">    println!(&quot;max_pint = &#123;&#125;&quot;,MAX_POINT);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="4-类型"><a href="#4-类型" class="headerlink" title="4 类型"></a>4 类型</h1><p>rust是静态语言，必须知道所有的类型<br>编译器有自动推导的能力</p>
<p>基础类型 bool int char 数组</p>
<p>自适应类型isize(有符号的) usize(无符号)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">    //bool </span><br><span class="line">    let is_true: bool = true; </span><br><span class="line">    println!(&quot;is_true  = &#123;&#125;&quot;,is_true);</span><br><span class="line">    let is_false: bool = false; </span><br><span class="line">    println!(&quot;is_false  = &#123;&#125; , &#123;&#125;&quot;,is_false,is_true);</span><br><span class="line"></span><br><span class="line">    // char 在rust里面 是32位的  C++ 8位的</span><br><span class="line">    let a = &#x27;a&#x27;;</span><br><span class="line">    println!(&quot; a = &#123;&#125;&quot;,a);</span><br><span class="line"></span><br><span class="line">    let b =&#x27;你&#x27;;</span><br><span class="line">    println!(&quot; b = &#123;&#125;&quot;,b);</span><br><span class="line"></span><br><span class="line">    // i8 i16 i32 i64 u8 u16 u32 u64 f32 f64 </span><br><span class="line">    let c: i8=-11;</span><br><span class="line">    println!(&quot; c = &#123;&#125;&quot;,c);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    let d :f32 = 0.0007;</span><br><span class="line">    println!(&quot; d = &#123;&#125;&quot;,d);</span><br><span class="line"></span><br><span class="line">    // 自适应类型</span><br><span class="line">    // 输出无符号最大</span><br><span class="line">    println!(&quot;max = &#123;&#125;&quot;,usize::max_value());</span><br><span class="line">    </span><br><span class="line">    // 数组 </span><br><span class="line">    // [type;size] ,size 也是数组类型的一部分</span><br><span class="line">    // size是数组类型的一部分</span><br><span class="line">    let arr: [u32;5] = [1,2,3,4,5];</span><br><span class="line">    println!(&quot;arr[0]=  &#123;&#125;&quot;,arr[0]);</span><br><span class="line">     </span><br><span class="line">    let arr1: [u32;3] = [1,2,3];</span><br><span class="line">    show(arr1);</span><br><span class="line"></span><br><span class="line">    // 元组</span><br><span class="line">    let tup :(i32,f32,char) = (-3,3.34,&#x27;年&#x27;);</span><br><span class="line">    let tup =  (-3,3.34,&#x27;年&#x27;);</span><br><span class="line">    println!(&quot;&#123;&#125; &quot;,tup.0);</span><br><span class="line">    println!(&quot;&#123;&#125; &quot;,tup.1);</span><br><span class="line">    println!(&quot;&#123;&#125; &quot;,tup.2);</span><br><span class="line"></span><br><span class="line">    let (x,y,z) = tup;</span><br><span class="line">    println!(&quot;&#123;&#125;&quot;,x);</span><br><span class="line">    println!(&quot;&#123;&#125;&quot;,y);</span><br><span class="line">    println!(&quot;&#123;&#125;&quot;,z);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn show(arr:[u32;3])&#123;</span><br><span class="line">    println!(&quot;------------&quot;);</span><br><span class="line">    for i in &amp;arr&#123;</span><br><span class="line">        println!(&quot;&#123;&#125;&quot;,i);</span><br><span class="line">    &#125;</span><br><span class="line">    println!(&quot;------------&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="5-函数"><a href="#5-函数" class="headerlink" title="5 函数"></a>5 函数</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">fn other_fun()&#123;</span><br><span class="line">    println!(&quot;this is a function &quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn other_fun1(a:i32,b:u32)&#123;</span><br><span class="line">    println!(&quot;a = &#123;&#125;, b = &#123;&#125;&quot;,a,b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 函数参数推导,不可以推导</span><br><span class="line"></span><br><span class="line">// fn other_fun2(a,b)&#123;</span><br><span class="line">//     println!(&quot;a = &#123;&#125;, b = &#123;&#125;&quot;,a,b);</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">fn other_fun2(a:i32,b:i32) -&gt; i32&#123;</span><br><span class="line">   let result = a +b;</span><br><span class="line">   return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 不能用；号  </span><br><span class="line">fn other_fun3(a:i32,b:i32) -&gt; i32&#123;</span><br><span class="line">    let result = a +b;</span><br><span class="line">     result</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> fn other_fun4(a:i32,b:i32) -&gt; i32&#123;</span><br><span class="line">    a +b</span><br><span class="line">    </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line"></span><br><span class="line">    other_fun();</span><br><span class="line">    let a:i32 =-1;</span><br><span class="line">    let b:u32 =2;</span><br><span class="line">    other_fun1(a,b);</span><br><span class="line"></span><br><span class="line">    let c:i32 =9;</span><br><span class="line">    let r:i32= other_fun2(a,c);</span><br><span class="line">    println!(&quot;r = &#123;&#125;&quot;,r);</span><br><span class="line"></span><br><span class="line">    let r2:i32= other_fun4(a,c);</span><br><span class="line">    println!(&quot;r2 = &#123;&#125;&quot;,r2);</span><br><span class="line"></span><br><span class="line">   // 语句是执行一些操作</span><br><span class="line">   // let y=1 ;  // 语句 没有返回值</span><br><span class="line">   </span><br><span class="line">   // 表达式会计算一些值</span><br><span class="line">   let y = &#123;</span><br><span class="line">     let x = 1; </span><br><span class="line">     x+1</span><br><span class="line">   &#125;;</span><br><span class="line">   println!(&quot; y = &#123;&#125;&quot;,y);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="6-注释"><a href="#6-注释" class="headerlink" title="6 注释"></a>6 注释</h1><h1 id="7-控制流"><a href="#7-控制流" class="headerlink" title="7 控制流"></a>7 控制流</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">     let y=2;</span><br><span class="line">     if y==1&#123;</span><br><span class="line">        println!(&quot;y =1 &quot;)</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     // if else</span><br><span class="line"></span><br><span class="line">     if y==1&#123;</span><br><span class="line">        println!(&quot;y==1&quot;);</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">        println!(&quot;y!=1&quot;);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     // 多个if else</span><br><span class="line">     let y=100;</span><br><span class="line">     if y==1&#123;</span><br><span class="line">        println!(&quot;y==1&quot;);</span><br><span class="line">     &#125;else if y==0&#123;</span><br><span class="line">        println!(&quot;y==0&quot;);</span><br><span class="line">     &#125;else if y==-1&#123;</span><br><span class="line">        println!(&quot;y==-1&quot;);</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">        println!(&quot;other&quot;);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     // let中使用if </span><br><span class="line">     let condition =true;</span><br><span class="line">     let x =if condition &#123;</span><br><span class="line">        5</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">        6</span><br><span class="line">        // &quot;sixe&quot;  error</span><br><span class="line">     &#125;;</span><br><span class="line">     println!(&quot;x =&#123;&#125;&quot;,x);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       // 循环</span><br><span class="line">       let mut count = 0;</span><br><span class="line">    loop &#123;</span><br><span class="line">        println!(&quot;loop &quot;);</span><br><span class="line">        if count ==10&#123;</span><br><span class="line">             break ;</span><br><span class="line">        &#125;</span><br><span class="line">        count = count+1; //  count+=1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    let result = loop &#123;</span><br><span class="line">        count +=1;</span><br><span class="line">        if count ==20 &#123;</span><br><span class="line">            break count*2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    println!(&quot;result = &#123;&#125;&quot;,result);</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    // while 循环</span><br><span class="line">    let mut i = 0;</span><br><span class="line">    while i!=10&#123;</span><br><span class="line">        i+=1;</span><br><span class="line">    &#125;;</span><br><span class="line">    println!(&quot;i = &#123;&#125;&quot;,i);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // for </span><br><span class="line">    let arr:[u32;5] =[1,2,3,4,5];</span><br><span class="line">    // for element in arr.iter() &#123;</span><br><span class="line">        for element in &amp;arr &#123;</span><br><span class="line">        println!(&quot;element = &#123;&#125;&quot;,element);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="8-所有权"><a href="#8-所有权" class="headerlink" title="8 所有权"></a>8 所有权</h1><p><img src="/images/rust/1.png" alt="images"></p>
<p>重要的知识点 </p>
<ul>
<li><p>1 rust 通过所有权控制内存</p>
</li>
<li><p>2 堆栈</p>
<ul>
<li>编译的时候，数据类型大小固定的，分配在栈上。</li>
<li>如果不是固定的，分配到堆上。</li>
</ul>
</li>
<li><p>3 作用域</p>
<ul>
<li>{}</li>
</ul>
</li>
</ul>
<p>String的内存回收</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">  </span><br><span class="line">    </span><br><span class="line">    // 作用域, 看&#123;&#125;</span><br><span class="line"></span><br><span class="line">    let x:i32 =1;</span><br><span class="line">    &#123;</span><br><span class="line">        // 分配在栈上</span><br><span class="line">        let y:i32 =2;</span><br><span class="line">        println!(&quot;x =&#123;&#125;&quot;,x);</span><br><span class="line">        println!(&quot;y =&#123;&#125;&quot;,y);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        // 分配在堆上的 编译器不知道它的大小的</span><br><span class="line">        let mut s1=String::from(&quot;hello&quot;);</span><br><span class="line">       // s1.push_str(&quot; ss&quot;);</span><br><span class="line">        println!(&quot;s1 = &#123;&#125;&quot;,s1); </span><br><span class="line">        // String类型离开作用域 会调用drop方法</span><br><span class="line">        // 类似C++的析构函数</span><br><span class="line"></span><br><span class="line">        let s2=s1;</span><br><span class="line">        println!(&quot;s2 = &#123;&#125; &quot;,s2);</span><br><span class="line">        //error value borrowed here after move</span><br><span class="line">        // 移动</span><br><span class="line">        // println!(&quot;s1 = &#123;&#125; &quot;,s1);  已经move到s2了 s1报错了 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // 克隆 clone</span><br><span class="line">       // 相当于c++的深拷贝</span><br><span class="line">        let s3= s2.clone();</span><br><span class="line">        println!(&quot;s3 = &#123;&#125;&quot;,s3);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // copy </span><br><span class="line">    let a =1 ;</span><br><span class="line">    let b=a; </span><br><span class="line">    // 在栈上的数据 实际就是一个copy </span><br><span class="line">    println!(&quot;a = &#123;&#125; b= &#123;&#125;&quot;,a,b);</span><br><span class="line">    // println!(&quot;y =&#123;&#125;&quot;,y);</span><br><span class="line"></span><br><span class="line">    // 所有的整形</span><br><span class="line">    // 浮点型 </span><br><span class="line">    // 字符类型 char</span><br><span class="line">    // 元组 </span><br><span class="line">    // 具有copy的特征</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">fn takes_ownership(some_string : String) -&gt; String &#123;</span><br><span class="line">   println!(&quot;&#123;&#125;&quot;, some_string);</span><br><span class="line">   some_string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn make_copy(i:i32)&#123;</span><br><span class="line">   println!(&quot; i = &#123;&#125;&quot;,i  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn main()&#123;</span><br><span class="line"></span><br><span class="line">   let s = String::from(&quot;hello&quot;);</span><br><span class="line">   // s 回收到是到takes_ownership这个函数的&#123;&#125;</span><br><span class="line">   let s1=takes_ownership(s);</span><br><span class="line">   //value borrowed here after move error</span><br><span class="line">   // println!(&quot;&#123;&#125;&quot;,s);</span><br><span class="line">   </span><br><span class="line">    println!(&quot;&#123;&#125;&quot;,s1);</span><br><span class="line"></span><br><span class="line">   let x =5 ;</span><br><span class="line">   make_copy(x);</span><br><span class="line">   // 分配栈上的 具有copy </span><br><span class="line">   println!(&quot;x=&#123;&#125;&quot;,x);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="9-引用"><a href="#9-引用" class="headerlink" title="9 引用"></a>9 引用</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">// fn main() &#123;</span><br><span class="line">//     let s1= gives_ownership();</span><br><span class="line"></span><br><span class="line">//     println!(&quot;s1 = &#123;&#125;&quot; ,s1);</span><br><span class="line">//     let mut s2= String::from(&quot;hello &quot;);</span><br><span class="line">//     let s3 = takes_and_give_back(s2);</span><br><span class="line">//     let s2 = takes_and_give_back(s3);</span><br><span class="line"></span><br><span class="line">//     println!(&quot;s2 = &#123;&#125;&quot;,s2);</span><br><span class="line">//     println!(&quot;Hello, world!&quot;);</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// fn gives_ownership() -&gt; String &#123;</span><br><span class="line">//     let s = String::from(&quot;hello&quot;);</span><br><span class="line">//     s</span><br><span class="line">//    //调用drop</span><br><span class="line">//    // 如果有人引用 将所有权转移到s1 </span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// fn takes_and_give_back(s: String) -&gt;String&#123;</span><br><span class="line">//     s</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// 引用</span><br><span class="line">// &amp;</span><br><span class="line">// 让我创建一个指向值的引用，但是我们不拥有它 </span><br><span class="line">// 当引用离开值指向的作用域之也不会被丢弃。</span><br><span class="line">// 借用</span><br><span class="line">fn calcute_length(s :&amp;String)  -&gt; usize&#123;</span><br><span class="line">    s.len()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn modify_s(s: &amp;mut String)&#123;</span><br><span class="line">    s.push_str(&quot;, world&quot;);</span><br><span class="line">&#125;</span><br><span class="line">fn main()&#123;</span><br><span class="line">   let mut s1 =String::from(&quot;hello&quot;);</span><br><span class="line">//    let s=&amp;s1;</span><br><span class="line">//    let len =calcute_length(s);</span><br><span class="line">//    println!(&quot;s1 = &#123;&#125; &quot;,s1);</span><br><span class="line">//    println!(&quot;len = &#123;&#125;&quot;,len);</span><br><span class="line"></span><br><span class="line">//    let ms = &amp;mut s1;</span><br><span class="line">   // 借用 &amp;mut</span><br><span class="line">//    modify_s(ms);</span><br><span class="line"></span><br><span class="line">   //println!(&quot;s1 = &#123;&#125;&quot;,s1);</span><br><span class="line">   //println!(&quot;s = &#123;&#125;&quot;,s);</span><br><span class="line">   //println!(&quot;ms = &#123;&#125;&quot;,ms);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   let r1= &amp;s1;</span><br><span class="line">   let r2= &amp;s1;</span><br><span class="line">   </span><br><span class="line">   println!(&quot;&#123;&#125; &#123;&#125; &quot;,r1,r2);</span><br><span class="line"></span><br><span class="line">   let r3= &amp;mut s1;</span><br><span class="line">   r3.push_str(&quot;, world&quot;);</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="10-slice"><a href="#10-slice" class="headerlink" title="10 slice"></a>10 slice</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">// 1 字符串slice是String中一部分值的引用</span><br><span class="line">// 2 字面值就是slice</span><br><span class="line">// 3 其他类型是slice</span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line">    let s= String::from(&quot;hello world&quot;);</span><br><span class="line">    // 左开右闭</span><br><span class="line">    let h = &amp;s[0..5];</span><br><span class="line">    let h = &amp;s[0..=4];</span><br><span class="line">    let h = &amp;s[..=4];</span><br><span class="line">    let h = &amp;s[..5];</span><br><span class="line">    println!(&quot; h = &#123;&#125;&quot;,h);</span><br><span class="line"></span><br><span class="line">    let w = &amp;s[6..11];</span><br><span class="line">    let w = &amp;s[6..=10];</span><br><span class="line">    let w = &amp;s[6..];</span><br><span class="line">    println!(&quot; w = &#123;&#125;&quot;,w);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // let ss =String::from(&quot;你好&quot;);</span><br><span class="line">    // let w1 =&amp;ss[0..1];</span><br><span class="line"></span><br><span class="line">    // 字面值存储在二进制中的  // &amp;str 不可变的引用</span><br><span class="line">    let s3 =&quot;hh&quot;;</span><br><span class="line"></span><br><span class="line">    let a = [1,2,4,5];</span><br><span class="line">    let sss =&amp;a[1..3];</span><br><span class="line">    println!(&quot;sss[0] = &#123;&#125;&quot;,sss[0]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="11-结构体"><a href="#11-结构体" class="headerlink" title="11 结构体"></a>11 结构体</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">    // 1 定义结构体</span><br><span class="line">    #[derive(Debug)]</span><br><span class="line">    struct User&#123;</span><br><span class="line">        name :String,</span><br><span class="line">        count:String,</span><br><span class="line">        nonce: u64,</span><br><span class="line">        active:bool,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 2 创建结构体实例</span><br><span class="line"></span><br><span class="line">    let xiaoming  = User&#123;</span><br><span class="line">        name:String::from(&quot;xiaoming&quot;),</span><br><span class="line">        count:String::from(&quot;323232&quot;),</span><br><span class="line">        nonce: 10000,</span><br><span class="line">        active: true,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 3 修改结构体字段</span><br><span class="line"></span><br><span class="line">    let mut xiaowang  = User&#123;</span><br><span class="line">        name:String::from(&quot;xiaowang&quot;),</span><br><span class="line">        count:String::from(&quot;11222&quot;),</span><br><span class="line">        nonce: 1000,</span><br><span class="line">        active: false,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    println!(&quot;xiaowang  -- &#123;:?&#125;&quot;,xiaowang);</span><br><span class="line">    println!(&quot;xiaowang  -- &#123;:#?&#125;&quot;,xiaowang);</span><br><span class="line"></span><br><span class="line">    xiaowang.active=true;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 4 参数名字和字段名字同名的简写方法</span><br><span class="line"></span><br><span class="line">    let name =String::from(&quot;xiaoxiao&quot;);</span><br><span class="line">    let count =String::from(&quot;888999&quot;);</span><br><span class="line">    let nonce =20000;</span><br><span class="line">    let active =false;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    let user1 = User&#123;</span><br><span class="line">        name,</span><br><span class="line">        count,</span><br><span class="line">        nonce,</span><br><span class="line">        active </span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 5 从其他结构体创建实例</span><br><span class="line"></span><br><span class="line">    let user2 = User &#123;</span><br><span class="line">        name:String::from(&quot;user2&quot;),</span><br><span class="line">        ..user1</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    println!(&quot;user2 name= &#123;&#125; &quot;,user2.name);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 6元组结构体  </span><br><span class="line">    struct Point(i32,i32);</span><br><span class="line"></span><br><span class="line">    let a =Point(10,20);</span><br><span class="line">    let b =Point(30,11);</span><br><span class="line"></span><br><span class="line">    println!(&quot;a.x = &#123;&#125;  a.y=&#123;&#125; &quot;,a.0,a.1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 7 没有任何字段类单元结构体</span><br><span class="line"></span><br><span class="line">    struct A&#123;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 8 打印结构体</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="12-方法"><a href="#12-方法" class="headerlink" title="12 方法"></a>12 方法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#[derive(Debug)]</span><br><span class="line">struct Dog&#123;</span><br><span class="line">    name:String,</span><br><span class="line">    weight:f32,</span><br><span class="line">    height:f32,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">impl Dog&#123;</span><br><span class="line">    fn get_name(&amp;self) -&gt;&amp;str&#123;</span><br><span class="line">        &amp;(self.name[..])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fn get_weight(&amp;self) -&gt;f32&#123;</span><br><span class="line">        self.weight</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    fn show()&#123;</span><br><span class="line">        println!(&quot;oh oh &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">impl Dog&#123;</span><br><span class="line">    fn get_height(&amp;self) -&gt;f32&#123;</span><br><span class="line">        self.height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line"></span><br><span class="line">    let dog =Dog &#123; </span><br><span class="line">        name:String::from(&quot;jack&quot;),</span><br><span class="line">        weight:23.22,</span><br><span class="line">        height:22.11,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    println!(&quot;dog  &#123;:#?&#125;&quot;,dog);</span><br><span class="line"></span><br><span class="line">    println!(&quot;name  = &#123;&#125; &quot;,dog.get_name());</span><br><span class="line">    println!(&quot;weight  = &#123;&#125; &quot;,dog.get_weight());</span><br><span class="line">    println!(&quot;height  = &#123;&#125; &quot;,dog.get_height());</span><br><span class="line">    Dog::show();</span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="13-枚举类型与匹配"><a href="#13-枚举类型与匹配" class="headerlink" title="13 枚举类型与匹配"></a>13 枚举类型与匹配</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">  // 1 类似于C语言的方式定义</span><br><span class="line">  enum IpAddKind&#123;</span><br><span class="line">    V4,</span><br><span class="line">    V6,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  struct IpAddr&#123;</span><br><span class="line">     Kind:IpAddKind,</span><br><span class="line">     address: String,</span><br><span class="line">  &#125; </span><br><span class="line"></span><br><span class="line">  enum IpAddr2 &#123;</span><br><span class="line">    V4(String),</span><br><span class="line">    V6(String),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">   // 3 可以是不同类型</span><br><span class="line"></span><br><span class="line">   enum IpAddr3&#123;</span><br><span class="line">    V4(u8,u8,u8,u8),</span><br><span class="line">    V6(String)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> //4 经典用法</span><br><span class="line"> enum Message&#123;</span><br><span class="line">    Quit,</span><br><span class="line">    Move&#123;x:i32,y:i32&#125;,</span><br><span class="line">    Write(String),</span><br><span class="line">    Change(i32,i32,i32),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 5 枚举类型的方法以及match</span><br><span class="line">  impl Message&#123;</span><br><span class="line">     fn prin(&amp;self)&#123;</span><br><span class="line">        match *self &#123;</span><br><span class="line">            Message::Quit=&gt; println!(&quot;Quit&quot;),</span><br><span class="line">            Message::Move&#123;x,y&#125; =&gt; println!(&quot;move x = &#123;&#125; , y = &#123;&#125;&quot;,x,y),</span><br><span class="line">            Message::Change(a,b,c) =&gt; println!(&quot;change a =&#123;&#125; b =&#123;&#125; c =&#123;&#125;&quot;,a,b,c),</span><br><span class="line">            _ =&gt;println!(&quot;Write &quot;)</span><br><span class="line">            //Message::Write(&amp;s) =&gt; println!(&quot;Write=  &#123;&#125;&quot;,s)</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  fn main() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  let i1= IpAddr &#123;</span><br><span class="line">    Kind : IpAddKind::V4,</span><br><span class="line">     address: String::from(&quot;127.0.0.1&quot;)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  let i2= IpAddr&#123;</span><br><span class="line">    Kind : IpAddKind::V6,</span><br><span class="line">    address: String::from(&quot;.1&quot;)</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // 2 rust语言提倡的方式定义</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">  let i1 =IpAddr2::V4(String::from(&quot;127.0.0.1&quot;));</span><br><span class="line"></span><br><span class="line">  let i2 =IpAddr2::V6(String::from(&quot;::1&quot;));</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  let i1=IpAddr3::V4(127,0,0,1);</span><br><span class="line">  let i2=IpAddr3::V6(String::from(&quot;::1&quot;));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  // 等同于 </span><br><span class="line">  // struct QuitMessage //类单元结构体</span><br><span class="line">  // struct MoveMessage &#123;</span><br><span class="line">//     x:i32,y:i32</span><br><span class="line">  //&#125;</span><br><span class="line">  //</span><br><span class="line"></span><br><span class="line">  /*</span><br><span class="line">   struct WriteMessage(String)</span><br><span class="line">   struct Change(i32,i32,i32)</span><br><span class="line">  */</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   let quit= Message::Quit;</span><br><span class="line">   quit.prin();</span><br><span class="line"></span><br><span class="line">   let mo = Message::Move&#123;x:10,y:20&#125;;</span><br><span class="line">   mo.prin();</span><br><span class="line"></span><br><span class="line">   let wri =Message::Write(String::from(&quot;hello&quot;));</span><br><span class="line">   wri.prin();</span><br><span class="line"></span><br><span class="line">   let change = Message::Change(1,2,3);</span><br><span class="line">   change.prin();</span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="14-Option"><a href="#14-Option" class="headerlink" title="14 Option"></a>14 Option</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 1 Option是一个标准定义的一个枚举</span><br><span class="line">/*</span><br><span class="line">enum Option&lt;T&gt;&#123;</span><br><span class="line">    Some&lt;T&gt;,</span><br><span class="line">    None,</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">//2 使用方式</span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line"></span><br><span class="line">    let some_number = Some(5);</span><br><span class="line"></span><br><span class="line">    let some_string = Some(String::from(&quot; a string&quot;));</span><br><span class="line"></span><br><span class="line">    let absent_number:Option&lt;i32&gt; = None ;</span><br><span class="line"></span><br><span class="line">    let x:i32 =5; </span><br><span class="line">    let y:Option&lt;i32&gt; = Some(5);</span><br><span class="line">    // 两种不同的类型 相加不可以</span><br><span class="line">    // let sum = x +y;</span><br><span class="line"></span><br><span class="line">    let mut temp =0 ;</span><br><span class="line">    match y &#123;</span><br><span class="line">         Some(i) =&gt; &#123;temp = i ;&#125;</span><br><span class="line">         None =&gt; &#123;println!(&quot;do nothing&quot;);&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    let sum =x +temp ;</span><br><span class="line"></span><br><span class="line">    println!(&quot;sum = &#123;&#125;&quot;,sum);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // let result =plus_one(y);</span><br><span class="line">    // match result&#123;</span><br><span class="line">    //     Some(i) =&gt; &#123;println!(&quot;result = &#123;&#125;&quot;,i);&#125;,</span><br><span class="line">    //     None =&gt; &#123;println!(&quot;nothing &quot;)&#125;,</span><br><span class="line">    // &#125;</span><br><span class="line"></span><br><span class="line">    if let Some(value) = plus_one(y)&#123;</span><br><span class="line">        println!(&quot;value = &#123;&#125;&quot; ,value);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    if let Some(value) = plus_one(y)&#123;</span><br><span class="line">        println!(&quot;value = &#123;&#125;&quot; ,value);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        println!(&quot;do nothing &quot; );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn plus_one(x:Option&lt;i32&gt;) -&gt;Option&lt;i32&gt;&#123;</span><br><span class="line">   </span><br><span class="line">    // 把所有类型处理到 否则会报错。</span><br><span class="line">   match x &#123;</span><br><span class="line">      None =&gt; None ,</span><br><span class="line">      Some(x) =&gt; Some(x+1),</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="16-Vector"><a href="#16-Vector" class="headerlink" title="16 Vector"></a>16 Vector</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">// 创建空的vector   Vec&lt;T&gt;</span><br><span class="line">// 创建包含初始值的vector</span><br><span class="line">// 丢弃vector</span><br><span class="line">// 读取元素</span><br><span class="line">// 更新元素</span><br><span class="line">// 遍历</span><br><span class="line">// 使用枚举</span><br><span class="line">fn main() &#123;</span><br><span class="line">    // 1 创建一个空的vector  默认是不可变的</span><br><span class="line">    let mut v: Vec&lt;i32&gt; =Vec::new();</span><br><span class="line">    v.push(1);</span><br><span class="line"></span><br><span class="line">    // 2</span><br><span class="line">    let v =vec![1,2,3];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 3丢弃vector</span><br><span class="line">    &#123;</span><br><span class="line">        let v1 = vec![1,2,3];</span><br><span class="line">        // 离开花括号进行丢弃</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //读取元素</span><br><span class="line">    let one: &amp;i32 = &amp;v[0];</span><br><span class="line">    println!(&quot;one = &#123;&#125;&quot;,one);</span><br><span class="line">    </span><br><span class="line">    println!(&quot;one = &#123;&#125;&quot;,*one);</span><br><span class="line"></span><br><span class="line">    // 推荐的方法</span><br><span class="line">    // 如果索引取得不存在 容错处理比较好</span><br><span class="line">    match v.get(1)&#123;</span><br><span class="line">        Some(value)=&gt; println!(&quot;value = &#123;&#125;&quot;,value),</span><br><span class="line">        _ =&gt; println!(&quot;do nothing&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    // 更新元素</span><br><span class="line">    let mut v2:Vec&lt;i32&gt; = Vec::new();</span><br><span class="line">     v2.push(2);</span><br><span class="line">     v2.push(4);</span><br><span class="line">     v2.push(2);</span><br><span class="line"></span><br><span class="line">     // 6遍历</span><br><span class="line">     // 不可变的遍历</span><br><span class="line">     for i in &amp;v2&#123;</span><br><span class="line">        println!(&quot;i = &#123;&#125; &quot;,i);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     // 可变的遍历</span><br><span class="line">     for i in &amp;mut v2 &#123;</span><br><span class="line">        *i +=1 ;</span><br><span class="line">        println!(&quot;i = &#123;&#125;&quot; , i );</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     // 7 </span><br><span class="line">     enum Context &#123; </span><br><span class="line">       Text(String),</span><br><span class="line">       Float(f32),</span><br><span class="line">       Int(i32),</span><br><span class="line">     &#125;;</span><br><span class="line">     let c = vec![</span><br><span class="line">        Context::Text(String::from(&quot;string&quot;)),</span><br><span class="line">        Context::Int(-1),</span><br><span class="line">        Context::Float(0.001),</span><br><span class="line">     ];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     // 8 补充</span><br><span class="line">     let mut v = vec![1,2,3,4,5];</span><br><span class="line">     // 使用了不可变引用</span><br><span class="line">     let first = &amp;v[0];</span><br><span class="line">     // 可变引用 mutable borrow occurs here</span><br><span class="line">     v.push(6);</span><br><span class="line">     //  使用了不可变引用</span><br><span class="line">    // println!(&quot;first= &#123;&#125;&quot;,first);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="17-String"><a href="#17-String" class="headerlink" title="17 String"></a>17 String</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line"></span><br><span class="line">    // 1 创建一个空string</span><br><span class="line">    let mut s0= String::new();</span><br><span class="line">    s0.push_str(&quot;hello&quot;);</span><br><span class="line">    println!(&quot;s0 = &#123;&#125;&quot;,s0);</span><br><span class="line"></span><br><span class="line">    // 2通过字面值创建一个String </span><br><span class="line">    let s1 = String::from(&quot;init some thing&quot;);</span><br><span class="line">    println!(&quot;s1 = &#123;&#125; &quot;,s1);</span><br><span class="line"></span><br><span class="line">    let s1 = &quot;init some thing1&quot;.to_string();</span><br><span class="line"></span><br><span class="line">    println!(&quot;s1 = &#123;&#125; &quot;,s1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 2.1 使用String::from()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 2.2 使用str的方式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 3 更新String</span><br><span class="line"></span><br><span class="line">    let mut s2 = String::from(&quot;hello&quot;);</span><br><span class="line">    s2.push_str(&quot;, world &quot;);</span><br><span class="line"></span><br><span class="line">    let ss =&quot; !&quot;.to_string();</span><br><span class="line">    // 引用</span><br><span class="line">    s2.push_str(&amp;ss);</span><br><span class="line">    println!(&quot;s2 = &#123;&#125; &quot;,s2);</span><br><span class="line"></span><br><span class="line">    println!(&quot;ss = &#123;&#125; &quot;,ss);</span><br><span class="line">    // 3.1 push_str </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // 3.2 push </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    let mut s2=String::from(&quot;tea&quot;);</span><br><span class="line">    // 只能用单引号  只能有一个字符</span><br><span class="line">    s2.push(&#x27;m&#x27;);</span><br><span class="line">    println!(&quot;s2 =&#123;&#125; &quot;,s2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    let s1 = &quot;hello&quot;.to_string();</span><br><span class="line">    let s2= String::from(&quot;,world &quot;);</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    // s1将所有权给了s3</span><br><span class="line">    // 引用不会被获取所有权的</span><br><span class="line">    let s3 = s1 + &amp;s2;</span><br><span class="line">    println!(&quot;s3 =&#123;&#125;&quot;,s3); </span><br><span class="line">    //value borrowed here after move</span><br><span class="line">    // println!(&quot;s1 =&#123;&#125;&quot;,s1); </span><br><span class="line">     println!(&quot;s2 =&#123;&#125;&quot;,s2); </span><br><span class="line"></span><br><span class="line">     let s341 = String::from(&quot;tic&quot;);</span><br><span class="line">     let s342 = String::from(&quot;tac&quot;);</span><br><span class="line">     let s343 = String::from(&quot;toe&quot;);</span><br><span class="line"></span><br><span class="line">     let s344 = format!(&quot;&#123;&#125;-&#123;&#125;-&#123;&#125;&quot;,s341,s342,s343);</span><br><span class="line">     println!(&quot;s344 = &#123;&#125; &quot;,s344);</span><br><span class="line">     println!(&quot;s341 = &#123;&#125; &quot;,s341);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">     let s4= String::from(&quot;hello&quot;);</span><br><span class="line">    //  let s41 = s4[0];</span><br><span class="line">     println!(&quot;s4.len = &#123;&#125; &quot; , s4.len());</span><br><span class="line">  </span><br><span class="line">     let s4 =String::from(&quot;你好&quot;);</span><br><span class="line">     println!(&quot;s4.len= &#123;&#125;&quot; , s4.len());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    let hello = &quot;你好&quot;;</span><br><span class="line">    // slice方式是可以的</span><br><span class="line">    let h5 = &amp;hello[0..3];</span><br><span class="line">    println!(&quot; h5 = &#123;&#125; &quot;,h5);</span><br><span class="line"></span><br><span class="line">     //thread &#x27;main&#x27; panicked at &#x27;byte index 2  is not a char boundary</span><br><span class="line"></span><br><span class="line">    // let h6 = &amp;hello[0..2];</span><br><span class="line">    // println!(&quot; h6 = &#123;&#125; &quot;,h6);</span><br><span class="line"></span><br><span class="line">    // chars </span><br><span class="line">    for c in s4.chars()&#123;</span><br><span class="line">        println!(&quot;c = &#123;&#125; &quot;,c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for b in s4.bytes()&#123;</span><br><span class="line">        println!(&quot;b = &#123;&#125; &quot;,b);</span><br><span class="line">    &#125;</span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="18-hashmap"><a href="#18-hashmap" class="headerlink" title="18 hashmap"></a>18 hashmap</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">1 HashMap&lt;K,V&gt;</span><br><span class="line">2 创建hashmap</span><br><span class="line">3 读取</span><br><span class="line">4遍历</span><br><span class="line">5更新</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line">use std::collections::HashMap;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line"></span><br><span class="line">    let mut scores:HashMap&lt;String,i32&gt; = HashMap::new();</span><br><span class="line">    scores.insert(String::from(&quot;Blue&quot;),32);</span><br><span class="line">    scores.insert(String::from(&quot;red&quot;),30);</span><br><span class="line">    scores.insert(String::from(&quot;yellow&quot;),10);</span><br><span class="line"></span><br><span class="line">    let keys = vec![</span><br><span class="line">        String::from(&quot;Blue&quot;),</span><br><span class="line">        String::from(&quot;Red&quot;),</span><br><span class="line">        ];</span><br><span class="line">    let values =vec![10,2];</span><br><span class="line">    </span><br><span class="line">    let scores: HashMap&lt;_,_&gt; = keys.iter().zip(values.iter()).collect();</span><br><span class="line">    </span><br><span class="line">    let k =String::from(&quot;Blue&quot;);</span><br><span class="line">    // option</span><br><span class="line">    // if let Some(v) = scores.get(&amp;k)&#123;</span><br><span class="line">    //     println!(&quot;v= &#123;&#125;&quot; ,v );</span><br><span class="line">    // &#125;</span><br><span class="line"></span><br><span class="line">    let k = String::from(&quot;yellow&quot;);</span><br><span class="line">    let v =scores.get(&amp;k);</span><br><span class="line"></span><br><span class="line">    match v&#123;</span><br><span class="line">        Some(value) =&gt; println!(&quot;v = &#123;&#125;&quot;,value),</span><br><span class="line">        None =&gt; println!(&quot;None&quot;),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println!(&quot;-----&quot;);</span><br><span class="line">    //遍历hashmap</span><br><span class="line">    for(key,value) in &amp;scores &#123;</span><br><span class="line">        // 顺序是不一定的 </span><br><span class="line">        // 遍历的时候任意的顺序</span><br><span class="line">        println!(&quot;&#123;&#125; , &#123;&#125; &quot;,key,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println!(&quot;-----&quot;);</span><br><span class="line"></span><br><span class="line">    // 插入值 </span><br><span class="line">    let mut ss = HashMap::new();</span><br><span class="line">    ss.insert(String::from(&quot;one&quot;),1);</span><br><span class="line">    ss.insert(String::from(&quot;two&quot;),2);</span><br><span class="line">    ss.insert(String::from(&quot;three&quot;),3);</span><br><span class="line">    ss.insert(String::from(&quot;one&quot;),3);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;-----&#123;:#?&#125;&quot;,ss);</span><br><span class="line">    //遍历hashmap</span><br><span class="line">    for(key,value) in &amp;ss &#123;</span><br><span class="line">        // 顺序是不一定的 </span><br><span class="line">        // 遍历的时候任意的顺序</span><br><span class="line">        println!(&quot;&#123;&#125; , &#123;&#125; &quot;,key,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 键不存在的时候插入</span><br><span class="line"></span><br><span class="line">    let mut ss1 = HashMap::new();</span><br><span class="line">    ss1.insert(String::from(&quot;one&quot;),1);</span><br><span class="line">    ss1.insert(String::from(&quot;two&quot;),2);</span><br><span class="line">    ss1.insert(String::from(&quot;three&quot;),3);</span><br><span class="line">    ss1.entry(String::from(&quot;one&quot;)).or_insert(3);</span><br><span class="line">    println!(&quot;-----&#123;:#?&#125;&quot;,ss1);</span><br><span class="line"></span><br><span class="line">    // 根据旧值更新一个新值</span><br><span class="line"></span><br><span class="line">    let text= &quot;hello world wonderful world&quot;;</span><br><span class="line">    let mut map = HashMap::new();</span><br><span class="line">    for word in text.split_whitespace()&#123;</span><br><span class="line">       let count = map.entry(word).or_insert(0);</span><br><span class="line">       *count +=1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println!(&quot; &#123;:?&#125;&quot; ,map);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;-----&quot;);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="19-模块1"><a href="#19-模块1" class="headerlink" title="19 模块1"></a>19 模块1</h1><h2 id="1、定义"><a href="#1、定义" class="headerlink" title="1、定义"></a>1、定义</h2><p>（1）包：Cargo的一个功能，允许构建、测试和分享crate。<br>（2）Crate：一个模块的树形结构，形成库或二进制项目。<br>（3）模块：通过use来使用，用来控制作用域和路径的私有性。<br>（4）路径：一个命名例如结构体、函数或模块等项的方式。</p>
<h2 id="2、包和Crate"><a href="#2、包和Crate" class="headerlink" title="2、包和Crate"></a>2、包和Crate</h2><p>（1）crate root是一个源文件，Rust编译器以它为起始点，并构成你的crate的根模<br>块。<br>（2）包提供一系列功能的一个或多个Crate。<br>（3）Crate root是src&#x2F;main.rs或者是src&#x2F;lib.rs。 说明：如果只有main.rs则说明这个包只<br>有一个crate（main），如果同时拥有main.rs和其它的lib.rs（不一定是这个名字）则说<br>明拥有多个crate。<br>（4）crate会将一个作用域的相关功能分组到一起，使得该功能可以很方便的在多个项目<br>之间共享。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mod factory&#123;</span><br><span class="line">    pub mod produce_refrigerator &#123;</span><br><span class="line">        pub fn produce_re()&#123;</span><br><span class="line">            println!(&quot;produce refrigerator!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pub mod produce_washing_machine&#123;</span><br><span class="line">        pub fn produce_washing_machine()&#123;</span><br><span class="line">            println!(&quot;produce washing machine!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">fn main() &#123;</span><br><span class="line">    // 路径</span><br><span class="line">    factory::produce_refrigerator::produce_re();</span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="20-模块2"><a href="#20-模块2" class="headerlink" title="20 模块2"></a>20 模块2</h1><p>创建库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cargo new --lib mylib</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Cargo.toml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[dependencies]</span><br><span class="line">mylib = &#123;path=&quot;./mylib&quot;&#125; </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// use mylib::factory::produce_refrigerator as A;</span><br><span class="line">// use mylib::factory::produce_refrigerator::produce_re;</span><br><span class="line">// factory所有模块导入</span><br><span class="line">use mylib::factory::*;</span><br><span class="line">fn main() &#123;</span><br><span class="line">    // mylib::factory::produce_refrigerator::produce_re(); // 绝对路径</span><br><span class="line">    // produce_refrigerator::produce_re(); // 通过路径引用</span><br><span class="line">    // A::produce_re();</span><br><span class="line">    // produce_re();</span><br><span class="line">    // produce_refrigerator::produce_re();</span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="21-模块3"><a href="#21-模块3" class="headerlink" title="21 模块3"></a>21 模块3</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pub mod modA&#123;</span><br><span class="line">    #[derive(Debug)]</span><br><span class="line">    pub struct A &#123;</span><br><span class="line">        pub number :i32 ,</span><br><span class="line">        name: String,</span><br><span class="line">    &#125;</span><br><span class="line">    impl A&#123;</span><br><span class="line">        pub fn new_a() -&gt; A&#123;</span><br><span class="line">            A &#123;</span><br><span class="line">                number:1,</span><br><span class="line">                name:String::from(&quot;A&quot;),</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pub fn print_a(&amp;self)&#123;</span><br><span class="line">            println!(&quot;number = &#123;&#125;  name = &#123;&#125; &quot;,self.number,self.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    pub mod modB &#123;</span><br><span class="line">        pub fn print_B()&#123;</span><br><span class="line">            println!(&quot;B&quot;)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        pub mod modC&#123;</span><br><span class="line">            pub fn print_C()&#123;</span><br><span class="line">                println!(&quot;C&quot;);</span><br><span class="line">                super::print_B();</span><br><span class="line">    </span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// use modA::A;</span><br><span class="line">use modA::A as A1;</span><br><span class="line">fn main() &#123;</span><br><span class="line">    // let a = modA::A::new_a();  // 绝对路径</span><br><span class="line">    // let a=A::new_a();</span><br><span class="line">    let a=A1::new_a();</span><br><span class="line">    a.print_a();</span><br><span class="line">    let number =a.number;</span><br><span class="line">    // let name =a.name;    // private field</span><br><span class="line"></span><br><span class="line">    modA::modB::modC::print_C(); </span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="模块4"><a href="#模块4" class="headerlink" title="模块4"></a>模块4</h1><p>如何使用外部的模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[dependencies]</span><br><span class="line">rust-crypto =&quot;0.2&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>引入 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">extern crate crypto;</span><br><span class="line"></span><br><span class="line">use crypto::digest::Digest;</span><br><span class="line">use crypto::sha3::Sha3;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="23-错误1"><a href="#23-错误1" class="headerlink" title="23 错误1"></a>23 错误1</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">rust语言的错误分为两个类别， 可恢复错误和不可恢复错误。 </span><br><span class="line">1 可恢复错误通常代表向用户报告错误和重试操作是合理的情况。例如未找到文件 rust中使用Result&lt;T,E&gt; 来实现</span><br><span class="line"></span><br><span class="line">2 不可恢复错误是bug的同义词。如尝试访问超过数组结尾的位置，rust中通过panic！来是实现 。</span><br><span class="line"></span><br><span class="line">2 panic!</span><br><span class="line"></span><br><span class="line">3 BACKTRACE =1 </span><br><span class="line">4 Result&lt;T,E &gt; </span><br><span class="line"></span><br><span class="line">enum Result&lt;T,E&gt;&#123;</span><br><span class="line">    Ok(T),</span><br><span class="line">    Err(E),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">5 简写 </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">use std::fs::File;</span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line"></span><br><span class="line">    // panic!(&quot;crash here&quot;);</span><br><span class="line">    // RUST_BACKTRACE=1 cargo run</span><br><span class="line"></span><br><span class="line">    // let f =File::open(&quot;hello.txt&quot;);</span><br><span class="line">    // let r = match f &#123;</span><br><span class="line">    //     Ok(file) =&gt; file,</span><br><span class="line">    //     Err(error) =&gt; panic!(&quot;error :&#123;:?&#125;&quot;,error),</span><br><span class="line">    // &#125;;</span><br><span class="line"></span><br><span class="line">    // let f =File::open(&quot;hello.txt&quot;).unwrap();</span><br><span class="line"></span><br><span class="line">    let f =File::open(&quot;hello.txt&quot;).expect(&quot;failed to open file&quot;);</span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="24-错误2"><a href="#24-错误2" class="headerlink" title="24 错误2"></a>24 错误2</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"> /*</span><br><span class="line">传播错误 </span><br><span class="line">将错误传给调用者，让调用者决定如何处理，这称为传播错误</span><br><span class="line"></span><br><span class="line">传播错误的简写方式 提倡的方式</span><br><span class="line"></span><br><span class="line">更进一步的简写 </span><br><span class="line"></span><br><span class="line">什么时候用panic  什么时候用Result</span><br><span class="line">- 实例代码原型 测试用panic\expect\unwrap</span><br><span class="line">- 正式项目用用result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5 Option and Result </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">use std::io;</span><br><span class="line">use std::io::Read;</span><br><span class="line">use std::fs::File;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn main() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    println!(&quot;Hello, world!&quot;);</span><br><span class="line">    let r =  read_username_from_file();</span><br><span class="line">    match r &#123;</span><br><span class="line">        Ok(s) =&gt; println!(&quot;s = &#123;&#125;&quot;,s),</span><br><span class="line">        Err(e) =&gt; println!(&quot;err = &#123;:?&#125; &quot;,e),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// fn read_username_from_file() -&gt; Result&lt;String,io::Error&gt;&#123;</span><br><span class="line"></span><br><span class="line">//      let f =File::open(&quot;hello.txt&quot;);</span><br><span class="line">//      let mut f =match f&#123;</span><br><span class="line">//         Ok(file) =&gt;file ,</span><br><span class="line">//         Err(error)=&gt;return Err(error),</span><br><span class="line">//      &#125;;</span><br><span class="line"></span><br><span class="line">//      let mut s =String::new();</span><br><span class="line">//      match f.read_to_string(&amp;mut s) &#123;</span><br><span class="line">//          Ok(_)=&gt;  Ok(s),</span><br><span class="line">//          Err(error) =&gt; Err(error),</span><br><span class="line">//      &#125;</span><br><span class="line"></span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// fn read_username_from_file() -&gt; Result&lt;String,io::Error&gt;&#123;</span><br><span class="line"></span><br><span class="line">//     // 通过 ？ 返回了error</span><br><span class="line">//     let mut f =File:: open(&quot;hello.txt&quot;)?;</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">//     let mut s =String::new();</span><br><span class="line">//     f.read_to_string(&amp;mut s)?;</span><br><span class="line">//     Ok(s)</span><br><span class="line"></span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// 简写的方式</span><br><span class="line">fn read_username_from_file() -&gt; Result&lt;String,io::Error&gt;&#123;</span><br><span class="line">   </span><br><span class="line">    let mut s =String::new();</span><br><span class="line">    File::open(&quot;hello.txt&quot;)?.read_to_string(&amp;mut s)?;</span><br><span class="line">    Ok(s)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>cargo test</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// 导出animial</span><br><span class="line">pub mod animal;</span><br><span class="line"></span><br><span class="line">#[cfg(test)]</span><br><span class="line">mod tests &#123;</span><br><span class="line">    // use animal::cat;</span><br><span class="line">    // use animal::dog;</span><br><span class="line">    use crate::animal::*;</span><br><span class="line">    #[test]</span><br><span class="line">    fn it_works() &#123;</span><br><span class="line">        let result = 2 + 2;</span><br><span class="line">        assert_eq!(result, 4);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #[test]</span><br><span class="line">    fn use_cat() &#123;</span><br><span class="line">        // cat.hello();</span><br><span class="line">        assert_eq!(true,cat::is_cat());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #[test]</span><br><span class="line">    fn use_dog() &#123;</span><br><span class="line">        // cat.hello();</span><br><span class="line">        assert_eq!(true,dog::is_dog());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 测试一下</span><br><span class="line"></span><br></pre></td></tr></table></figure>


        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>Post title：5-1RustBasic</li>
        <li>Post author：DarrenLi</li>
        <li>Create time：2019-07-14 21:12:49</li>
        <li>
            Post link：https://www.ai-lijia.com/2019/07/14/5-1RustBasic/
        </li>
        <li>
            Copyright Notice：All articles in this blog are licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> unless stating additionally.
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/tags/Rust/">#Rust</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2019/10/19/5-2RustAdvanced/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">5-2RustAdvanced</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2019/04/27/5-0rust/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">rust</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
            <div class="comment-container">
                <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments">&nbsp;Comments</i>
    </div>
    

        
            
    <div id="gitalk-container"></div>
    <script 
            src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
    <script >

        function loadGitalk() {
            let __gitalk__pathname = decodeURI(location.pathname);
            const __gitalk__pathnameLength = __gitalk__pathname.length;
            const __gitalk__pathnameMaxLength = 50;
            if (__gitalk__pathnameLength > __gitalk__pathnameMaxLength) {
                __gitalk__pathname = __gitalk__pathname.substring(0, __gitalk__pathnameMaxLength - 3) + '...';
            }

            try {
                Gitalk && new Gitalk({
                    clientID: '1d734d55b657ee3b84d9',
                    clientSecret: '9fff6e6af74dde8847b2dcce34f90726b793f65f',
                    repo: 'darrenli6.github.io',
                    owner: 'darrenli6',
                    admin: ['darrenli6'],
                    id: __gitalk__pathname,
                    language: 'en'
                }).render('gitalk-container');

            } catch (e) {
                window.Gitalk = null;
            }
        }

        if ('false') {
            const loadGitalkTimeout = setTimeout(() => {
                loadGitalk();
                clearTimeout(loadGitalkTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadGitalk);
        }
    </script>



        
    
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">DarrenLi</a>
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;|&nbsp;Theme&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fas fa-comment"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E5%8F%98%E9%87%8F"><span class="nav-number">1.</span> <span class="nav-text">3 变量</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.</span> <span class="nav-text">4 类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E5%87%BD%E6%95%B0"><span class="nav-number">3.</span> <span class="nav-text">5 函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E6%B3%A8%E9%87%8A"><span class="nav-number">4.</span> <span class="nav-text">6 注释</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E6%8E%A7%E5%88%B6%E6%B5%81"><span class="nav-number">5.</span> <span class="nav-text">7 控制流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%E6%89%80%E6%9C%89%E6%9D%83"><span class="nav-number">6.</span> <span class="nav-text">8 所有权</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E5%BC%95%E7%94%A8"><span class="nav-number">7.</span> <span class="nav-text">9 引用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-slice"><span class="nav-number">8.</span> <span class="nav-text">10 slice</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="nav-number">9.</span> <span class="nav-text">11 结构体</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-%E6%96%B9%E6%B3%95"><span class="nav-number">10.</span> <span class="nav-text">12 方法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8C%B9%E9%85%8D"><span class="nav-number">11.</span> <span class="nav-text">13 枚举类型与匹配</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14-Option"><span class="nav-number">12.</span> <span class="nav-text">14 Option</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-Vector"><span class="nav-number">13.</span> <span class="nav-text">16 Vector</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#17-String"><span class="nav-number">14.</span> <span class="nav-text">17 String</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#18-hashmap"><span class="nav-number">15.</span> <span class="nav-text">18 hashmap</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#19-%E6%A8%A1%E5%9D%971"><span class="nav-number">16.</span> <span class="nav-text">19 模块1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E5%AE%9A%E4%B9%89"><span class="nav-number">16.1.</span> <span class="nav-text">1、定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E5%8C%85%E5%92%8CCrate"><span class="nav-number">16.2.</span> <span class="nav-text">2、包和Crate</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#20-%E6%A8%A1%E5%9D%972"><span class="nav-number">17.</span> <span class="nav-text">20 模块2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#21-%E6%A8%A1%E5%9D%973"><span class="nav-number">18.</span> <span class="nav-text">21 模块3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A8%A1%E5%9D%974"><span class="nav-number">19.</span> <span class="nav-text">模块4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#23-%E9%94%99%E8%AF%AF1"><span class="nav-number">20.</span> <span class="nav-text">23 错误1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#24-%E9%94%99%E8%AF%AF2"><span class="nav-number">21.</span> <span class="nav-text">24 错误2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-number">22.</span> <span class="nav-text">测试</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/dark-light-toggle.js"></script>



    
<script src="/js/local-search.js"></script>







<div class="post-scripts">
    
        
<script src="/js/left-side-toggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/toc.js"></script>

    
</div>



</body>
</html>
